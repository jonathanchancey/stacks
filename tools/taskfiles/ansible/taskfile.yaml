---
# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: "3"

vars:
  ANSIBLE_LINT_FILE: "{{.ANSIBLE_DIR}}/.ansible-lint.yml"
  ANSIBLE_INVENTORY_FILE: "{{.ANSIBLE_DIR}}/inventory/academy/hosts.yml/"

env:
  ANSIBLE_VARS_ENABLED: "host_group_vars"
  ANSIBLE_LOCALHOST_WARNING: "False"
  ANSIBLE_INVENTORY_UNPARSED_WARNING: "False"

tasks:
  lint:
    desc: Lint Ansible
    cmd: "ansible-lint --config-file {{.ANSIBLE_LINT_FILE}} {{.ANSIBLE_DIR}}/roles/k3s/**/*.yml"
