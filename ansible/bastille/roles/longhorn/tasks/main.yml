- name: Create filesystem on volume
  community.general.filesystem:
    fstype: ext4
    dev: "{{ LONGHORN_DISK_IDENTIFIER }}"

- name: Create mount point
  ansible.builtin.file:
    path: "/var/lib/longhorn"
    state: directory

- name: Mount volume
  ansible.builtin.mount:
    path: "/var/lib/longhorn"
    src: "{{ LONGHORN_DISK_IDENTIFIER }}"
    fstype: ext4
    opts: defaults
    state: mounted
