apiVersion: install.istio.io/v1alpha1
kind: IstioOperator
spec:
  components:
    base:
      enabled: true
    egressGateways:
      - enabled: false
        name: istio-egressgateway
    ingressGateways:
      - enabled: true
        name: istio-ingressgateway
    pilot:
      enabled: true
    cni:
      enabled: true
      k8s:
        overlays:
          - apiVersion: "apps/v1"
            kind: "DaemonSet"
            name: "istio-cni-node"
            patches:
              - path: spec.template.spec.containers.[name:install-cni].securityContext.privileged
                value: true
  hub: docker.io/istio
  profile: default
  tag: 1.23.0
  values:
    defaultRevision: ""
    gateways:
      istio-egressgateway: {}
      istio-ingressgateway: {}
    global:
      configValidation: true
      istioNamespace: istio-system
    cni:
      cniBinDir: /opt/cni/bin
      cniConfDir: /etc/cni/net.d
