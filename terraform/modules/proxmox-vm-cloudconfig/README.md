# proxmox-vm-cloudconfig

```bash
terraform-docs markdown . --output-file README.md --output-mode inject --sort-by required
```
<!-- BEGIN_TF_DOCS -->
## Requirements

| Name                                                                | Version |
| ------------------------------------------------------------------- | ------- |
| <a name="requirement_local"></a> [local](#requirement\_local)       | 2.2.2   |
| <a name="requirement_proxmox"></a> [proxmox](#requirement\_proxmox) | 0.61.1  |
| <a name="requirement_tls"></a> [tls](#requirement\_tls)             | 3.1.0   |

## Providers

| Name                                                          | Version |
| ------------------------------------------------------------- | ------- |
| <a name="provider_proxmox"></a> [proxmox](#provider\_proxmox) | 0.61.1  |

## Modules

No modules.

## Resources

| Name                                                                                                                                                | Type     |
| --------------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| [proxmox_virtual_environment_file.cloud_config](https://registry.terraform.io/providers/bpg/proxmox/0.61.1/docs/resources/virtual_environment_file) | resource |
| [proxmox_virtual_environment_file.cloud_image](https://registry.terraform.io/providers/bpg/proxmox/0.61.1/docs/resources/virtual_environment_file)  | resource |
| [proxmox_virtual_environment_vm.vm](https://registry.terraform.io/providers/bpg/proxmox/0.61.1/docs/resources/virtual_environment_vm)               | resource |

## Inputs

| Name                                                                                                                           | Description                                                                                                                                       | Type                                                                                                                                                                                    | Default                                                                                                                                                                             | Required |
| ------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------: |
| <a name="input_cloud_image_datastore_id"></a> [cloud\_image\_datastore\_id](#input\_cloud\_image\_datastore\_id)               | The ID of the datastore where the cloud image will be stored.                                                                                     | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_cloud_image_file_name"></a> [cloud\_image\_file\_name](#input\_cloud\_image\_file\_name)                        | The file name to use when storing the cloud image.                                                                                                | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_cloud_image_node_name"></a> [cloud\_image\_node\_name](#input\_cloud\_image\_node\_name)                        | The name of the node where the cloud image will be stored.                                                                                        | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_cloud_image_url"></a> [cloud\_image\_url](#input\_cloud\_image\_url)                                            | The URL from which to download the cloud image.                                                                                                   | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_name"></a> [name](#input\_name)                                                                                 | VM Name                                                                                                                                           | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_node_name"></a> [node\_name](#input\_node\_name)                                                                | Proxmox Node Name                                                                                                                                 | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_password"></a> [password](#input\_password)                                                                     | Password of account to create                                                                                                                     | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_sshkeys"></a> [sshkeys](#input\_sshkeys)                                                                        | sshkeys                                                                                                                                           | `list(string)`                                                                                                                                                                          | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_username"></a> [username](#input\_username)                                                                     | Username of account to create                                                                                                                     | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_virtual_environment_endpoint"></a> [virtual\_environment\_endpoint](#input\_virtual\_environment\_endpoint)     | The endpoint for the Proxmox Virtual Environment API (example: https://host:port)                                                                 | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_virtual_environment_password"></a> [virtual\_environment\_password](#input\_virtual\_environment\_password)     | The password for the Proxmox Virtual Environment API                                                                                              | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_virtual_environment_username"></a> [virtual\_environment\_username](#input\_virtual\_environment\_username)     | The username and realm for the Proxmox Virtual Environment API (example: root@pam)                                                                | `string`                                                                                                                                                                                | n/a                                                                                                                                                                                 |   yes    |
| <a name="input_additional_disk_datastore_id"></a> [additional\_disk\_datastore\_id](#input\_additional\_disk\_datastore\_id)   | Datastore ID for the additional disk                                                                                                              | `string`                                                                                                                                                                                | `""`                                                                                                                                                                                |    no    |
| <a name="input_additional_disk_file_format"></a> [additional\_disk\_file\_format](#input\_additional\_disk\_file\_format)      | File format for the additional disk. May need to be raw for LVM                                                                                   | `string`                                                                                                                                                                                | `""`                                                                                                                                                                                |    no    |
| <a name="input_additional_disk_size"></a> [additional\_disk\_size](#input\_additional\_disk\_size)                             | Size of the additional disk                                                                                                                       | `number`                                                                                                                                                                                | `0`                                                                                                                                                                                 |    no    |
| <a name="input_agent"></a> [agent](#input\_agent)                                                                              | Enable the qemu guest agent flag. Do not enable if the agent isn't installed, check the proxmox provider documentation for more details           | `bool`                                                                                                                                                                                  | `true`                                                                                                                                                                              |    no    |
| <a name="input_clone"></a> [clone](#input\_clone)                                                                              | Set of maps indicating whether to clone an existing VM. Leave empty to create a new VM.                                                           | `set(map(bool))`                                                                                                                                                                        | `[]`                                                                                                                                                                                |    no    |
| <a name="input_clone_vm_id"></a> [clone\_vm\_id](#input\_clone\_vm\_id)                                                        | The ID of the VM to clone. Required if 'clone' is set.                                                                                            | `number`                                                                                                                                                                                | `null`                                                                                                                                                                              |    no    |
| <a name="input_cloud_image_checksum"></a> [cloud\_image\_checksum](#input\_cloud\_image\_checksum)                             | SHA256 checksum of cloud image for verification.                                                                                                  | `string`                                                                                                                                                                                | `""`                                                                                                                                                                                |    no    |
| <a name="input_cloud_image_content_type"></a> [cloud\_image\_content\_type](#input\_cloud\_image\_content\_type)               | The content type of the cloud image. Defaults to 'iso'.                                                                                           | `string`                                                                                                                                                                                | `"iso"`                                                                                                                                                                             |    no    |
| <a name="input_cloud_image_manage_etc_hosts"></a> [cloud\_image\_manage\_etc\_hosts](#input\_cloud\_image\_manage\_etc\_hosts) | This module will update the contents of the local hosts database (hosts file, usually /etc/hosts) based on the hostname/FQDN specified in config. | `string`                                                                                                                                                                                | `"false"`                                                                                                                                                                           |    no    |
| <a name="input_cloud_image_package_upgrade"></a> [cloud\_image\_package\_upgrade](#input\_cloud\_image\_package\_upgrade)      | Updates packages on first boot, if cloud\_image\_packages is specified, package\_update will be set to true                                       | `string`                                                                                                                                                                                | `"true"`                                                                                                                                                                            |    no    |
| <a name="input_cloud_image_packages"></a> [cloud\_image\_packages](#input\_cloud\_image\_packages)                             | Install additional packages on first boot                                                                                                         | `list(string)`                                                                                                                                                                          | <pre>[<br>  "qemu-guest-agent"<br>]</pre>                                                                                                                                           |    no    |
| <a name="input_cloud_image_runcmd"></a> [cloud\_image\_runcmd](#input\_cloud\_image\_runcmd)                                   | each item will be executed in order at rc.local like level with output to the console. runcmd only runs during the first boot                     | `list(string)`                                                                                                                                                                          | <pre>[<br>  "timedatectl set-timezone UTC",<br>  "systemctl enable qemu-guest-agent",<br>  "systemctl start qemu-guest-agent",<br>  "echo done > /tmp/cloud-config.done"<br>]</pre> |    no    |
| <a name="input_cloud_image_ssh_pwauth"></a> [cloud\_image\_ssh\_pwauth](#input\_cloud\_image\_ssh\_pwauth)                     | Enables or disables ssh password authentication                                                                                                   | `string`                                                                                                                                                                                | `"false"`                                                                                                                                                                           |    no    |
| <a name="input_cpu_cores"></a> [cpu\_cores](#input\_cpu\_cores)                                                                | The number of CPU cores to allocate to the VM. Defaults to 2.                                                                                     | `number`                                                                                                                                                                                | `2`                                                                                                                                                                                 |    no    |
| <a name="input_datastore_id"></a> [datastore\_id](#input\_datastore\_id)                                                       | Storage kocation for VM disk                                                                                                                      | `string`                                                                                                                                                                                | `"local"`                                                                                                                                                                           |    no    |
| <a name="input_description"></a> [description](#input\_description)                                                            | n/a                                                                                                                                               | `string`                                                                                                                                                                                | `"Managed by Terraform"`                                                                                                                                                            |    no    |
| <a name="input_disk_size"></a> [disk\_size](#input\_disk\_size)                                                                | The size of the VM's disk in GB. Defaults to 20 GB.                                                                                               | `number`                                                                                                                                                                                | `20`                                                                                                                                                                                |    no    |
| <a name="input_dns_domain"></a> [dns\_domain](#input\_dns\_domain)                                                             | The DNS Domain for the VM. Inheirits from Proxmox host if unset.                                                                                  | `string`                                                                                                                                                                                | `""`                                                                                                                                                                                |    no    |
| <a name="input_dns_servers"></a> [dns\_servers](#input\_dns\_servers)                                                          | List of dns servers. Inheirits from Proxmox host if unset                                                                                         | `list(string)`                                                                                                                                                                          | `[]`                                                                                                                                                                                |    no    |
| <a name="input_fqdn"></a> [fqdn](#input\_fqdn)                                                                                 | The fully qualified domain name                                                                                                                   | `string`                                                                                                                                                                                | `null`                                                                                                                                                                              |    no    |
| <a name="input_ip_config"></a> [ip\_config](#input\_ip\_config)                                                                | IP configuration for the VM                                                                                                                       | <pre>object({<br>    ipv4_address = optional(string)<br>    ipv4_gateway = optional(string)<br>    ipv6_address = optional(string)<br>    ipv6_gateway = optional(string)<br>  })</pre> | `null`                                                                                                                                                                              |    no    |
| <a name="input_ip_config_gateway"></a> [ip\_config\_gateway](#input\_ip\_config\_gateway)                                      | The IPv4 gateway for the VM. Required if using a static IPv4 address.                                                                             | `string`                                                                                                                                                                                | `""`                                                                                                                                                                                |    no    |
| <a name="input_ip_config_ipv4"></a> [ip\_config\_ipv4](#input\_ip\_config\_ipv4)                                               | The IPv4 address to be assigned to the VM. Leave empty for DHCP.                                                                                  | `string`                                                                                                                                                                                | `""`                                                                                                                                                                                |    no    |
| <a name="input_ip_config_ipv6_address"></a> [ip\_config\_ipv6\_address](#input\_ip\_config\_ipv6\_address)                     | The IPv6 address to be assigned to the VM. Leave empty if not using IPv6.                                                                         | `string`                                                                                                                                                                                | `""`                                                                                                                                                                                |    no    |
| <a name="input_ip_config_ipv6_gateway"></a> [ip\_config\_ipv6\_gateway](#input\_ip\_config\_ipv6\_gateway)                     | The IPv6 gateway for the VM. Required if using a static IPv6 address.                                                                             | `string`                                                                                                                                                                                | `""`                                                                                                                                                                                |    no    |
| <a name="input_memory_dedicated"></a> [memory\_dedicated](#input\_memory\_dedicated)                                           | The amount of dedicated memory for the VM in MB. Defaults to 4096 MB (4 GB).                                                                      | `number`                                                                                                                                                                                | `4096`                                                                                                                                                                              |    no    |
| <a name="input_network_device_vlan_id"></a> [network\_device\_vlan\_id](#input\_network\_device\_vlan\_id)                     | The VLAN ID for the network device. Set to 0 for untagged.                                                                                        | `number`                                                                                                                                                                                | `0`                                                                                                                                                                                 |    no    |
| <a name="input_reboot"></a> [reboot](#input\_reboot)                                                                           | Whether to reboot the VM after creation. Defaults to true.                                                                                        | `bool`                                                                                                                                                                                  | `true`                                                                                                                                                                              |    no    |
| <a name="input_tags"></a> [tags](#input\_tags)                                                                                 | n/a                                                                                                                                               | `list(string)`                                                                                                                                                                          | <pre>[<br>  "terraform"<br>]</pre>                                                                                                                                                  |    no    |
| <a name="input_template"></a> [template](#input\_template)                                                                     | Whether this VM should be created as a template. Defaults to false.                                                                               | `bool`                                                                                                                                                                                  | `false`                                                                                                                                                                             |    no    |
| <a name="input_tpm_state"></a> [tpm\_state](#input\_tpm\_state)                                                                | The TPM state version to use. Defaults to v2.0.                                                                                                   | `string`                                                                                                                                                                                | `"v2.0"`                                                                                                                                                                            |    no    |
| <a name="input_tpm_state_datastore_id"></a> [tpm\_state\_datastore\_id](#input\_tpm\_state\_datastore\_id)                     | tpm\_state\_datastore\_id                                                                                                                         | `string`                                                                                                                                                                                | `"local-lvm"`                                                                                                                                                                       |    no    |
| <a name="input_vm_id"></a> [vm\_id](#input\_vm\_id)                                                                            | Proxmox Qemu/KVM unique VM ID                                                                                                                     | `number`                                                                                                                                                                                | `null`                                                                                                                                                                              |    no    |

## Outputs

| Name                                                                                        | Description                                  |
| ------------------------------------------------------------------------------------------- | -------------------------------------------- |
| <a name="output_vm_id"></a> [vm\_id](#output\_vm\_id)                                       | The ID of the created Proxmox VM             |
| <a name="output_vm_ipv6_addresses"></a> [vm\_ipv6\_addresses](#output\_vm\_ipv6\_addresses) | The IPv6 address assigned to the VM via DHCP |
| <a name="output_vm_name"></a> [vm\_name](#output\_vm\_name)                                 | The name of the created Proxmox VM           |
<!-- END_TF_DOCS -->